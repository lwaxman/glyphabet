function setup(){textFillColour=color(25,212,255,150);for(var e=0;5>e;e++)layers[e]=new Layer;layerTemp=layers[1],createCanvas(canvasWidth,canvasHeight),pg=createGraphics(canvasWidth,canvasHeight+20),pg.background(255),pg.noStroke(),pg.fill(0),pg.textFont(font),pg.textSize(getTextSize()),pg.textAlign(CENTER),pg.text(myType,canvasWidth/2,canvasHeight/2),rectMode(CENTER)}function draw(){background(255),noLoop(),layers[1].styleMode="normal",layers[1].colour=color(0,0,0,20),layers[1].xOffset=0,layers[1].yOffset=0,layers[1].display(),layerTemp.styleMode=style,layerTemp.colour=textFillColour,layerTemp.grid=gridSize,layerTemp.onGrid=structure,layerTemp.minShapeSize=minSize,layerTemp.maxShapeSize=maxSize,layerTemp.font=font,layerTemp.stroke=!1,layerTemp.xOffset=xOffset,layerTemp.yOffset=yOffset,layerTemp.display()}function addNewLayer(e){layerCount++}function switchLayers(e){console.log("this layer number = "+e),layers[e].styleMode=layerTemp.styleMode,layers[e].xOffset=layerTemp.xOffset,layers[e].yOffset=layerTemp.yOffset,layers[e].font=layerTemp.font,layers[e].colour=layerTemp.colour,layers[e].grid=layerTemp.grid,layers[e].stroke=layerTemp.stroke,layers[e].minShapeSize=layerTemp.minShapeSize,layers[e].maxShapeSize=layerTemp.maxShapeSize,layers[0].styleMode=layers[e].styleMode,layers[0].xOffset=layers[e].xOffset,layers[0].yOffset=layers[e].yOffset,layers[0].font=layers[e].font,layers[0].colour=layers[e].colour,layers[0].grid=layers[e].grid,layers[0].stroke=layers[e].stroke,layers[0].minShapeSize=layers[e].minShapeSize,layers[0].maxShapeSize=layers[e].maxShapeSize,layerTemp.styleMode=layers[0].styleMode,layerTemp.xOffset=layers[0].xOffset,layerTemp.yOffset=layers[0].yOffset,layerTemp.font=layers[0].font,layerTemp.colour=layers[0].colour,layerTemp.grid=layers[0].grid,layerTemp.stroke=layers[0].stroke,layerTemp.minShapeSize=layers[0].minShapeSize,layerTemp.maxShapeSize=layers[0].maxShapeSize,draw()}function getTextSize(){var e=myType.split(""),a=e.length;return thisTextSize=canvasWidth/a*1.2}function drawNormal(e,a,r){textSize(getTextSize()),textFont(r),textAlign(CENTER),text(myType,canvasWidth/2+e,canvasHeight/2+a)}function drawCircles(e,a,r,t,s,i){if(e)for(var l=0;a>l;l++)for(var o=0;a>o;o++){var n=l*(width/a),y=o*(width/a),d=pg.get(n,y),f=random(r,t);0==d[0]&&ellipse(n+s,y+i,f,f)}else for(var c=0;3e3>c;c++){var n=random(canvasWidth),y=random(100,canvasWidth),d=pg.get(n,y),f=random(minSize,maxSize);0==d[0]&&ellipse(n+s,y+i,f,f)}}function drawSquares(e,a,r,t,s,i){if(e)for(var l=0;a>l;l++)for(var o=0;a>o;o++){var n=l*(width/a),y=o*(width/a),d=pg.get(n,y),f=random(r,t);0==d[0]&&rect(n+s,y+i,f,f)}else for(var c=0;3e3>c;c++){var n=random(canvasWidth),y=random(100,canvasWidth),d=pg.get(n,y),f=random(minSize,maxSize);0==d[0]&&rect(n+s,y+i,f,f)}}function drawExes(e,a,r,t,s,i,l){if(e)for(var o=0;a>o;o++)for(var n=0;a>n;n++){var y=o*(width/a),d=n*(width/a),f=pg.get(y,d),c=random(r,t),h=c/2;0==f[0]&&(stroke(l),line(y+s-h,d+i-h,y+s+h,d+i+h),line(y+s-h,d+i+h,y+s+h,d+i-h))}else for(var m=0;3e3>m;m++){var y=random(canvasWidth),d=random(100,canvasWidth),f=pg.get(y,d),c=random(minSize,maxSize),h=c/2;0==f[0]&&(stroke(l),line(y+s-h,d+i-h,y+s+h,d+i+h),line(y+s-h,d+i+h,y+s+h,d+i-h))}}function polygon(e,a,r,t){var s=TWO_PI/t;beginShape();for(var i=0;TWO_PI>i;i+=s){var l=e+cos(i)*r,o=a+sin(i)*r;vertex(l,o)}endShape(CLOSE)}function drawPolygons(e,a,r,t,s,i){if(e)for(var l=0;a>l;l++)for(var o=0;a>o;o++){var n=l*(width/a),y=o*(width/a),d=pg.get(n,y),f=random(r,t);o%2!=0&&(n+=f/2),0==d[0]&&polygon(n+s,y+i,f,6)}else for(var c=0;3e3>c;c++){var n=random(canvasWidth),y=random(100,canvasWidth),d=pg.get(n,y),f=random(minSize,maxSize);0==d[0]&&polygon(n+s,y+i,f,6)}}function Layer(){this.xOffset=0,this.yOffset=0,this.styleMode="normal",this.font="Georgia",this.colour,this.grid=80,this.stroke,this.opacity=!1,this.minShapeSize=5,this.maxShapeSize=10,this.onGrid=!0,this.display=function(){this.stroke?stroke(100):noStroke(),this.opacity?fill(this.colour):noFill(),fill(this.colour),"circles"==this.styleMode?drawCircles(this.onGrid,this.grid,this.minShapeSize,this.maxShapeSize,this.xOffset,this.yOffset):"squares"==this.styleMode?drawSquares(this.onGrid,this.grid,this.minShapeSize,this.maxShapeSize,this.xOffset,this.yOffset):"exes"==this.styleMode?drawExes(this.onGrid,this.grid,this.minShapeSize,this.maxShapeSize,this.xOffset,this.yOffset,this.colour):"polygons"==this.styleMode?drawPolygons(this.onGrid,this.grid,this.minShapeSize,this.maxShapeSize,this.xOffset,this.yOffset):"normal"==this.styleMode?drawNormal(this.xOffset,this.yOffset,this.font):drawNormal(this.xOffset,this.yOffset,this.font)}}function hexToRgb(e){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function getColour(){var e=$("#colourTextBox").val(),a=color(hexToRgb(e).r,hexToRgb(e).g,hexToRgb(e).b,150);return textFillColour=a,draw(),textFillColour}function getText(){var e=$("#textBox").val();console.log(e),myType=e,pg.background(255),pg.noStroke(),pg.fill(0),pg.textSize(getTextSize()),pg.textAlign(CENTER),pg.text(myType,canvasWidth/2,canvasHeight/2),draw()}var canvasWidth=$(window).width()-310,canvasHeight=$(window).height()-10,pg,myType="TEST",font="Georgia",insideText=!1,style="normal",minSize=10,maxSize=20,thisTextSize=100,gridSize=80,textFillColour,xOffset=0,yOffset=0,structure=!0,layerTemp=new Layer,layers=[];$("#normal").on("click",function(){style="normal",$(".styleMode").removeClass("active"),$("#normal").addClass("active"),draw()}),$("#circles").on("click",function(){style="circles",$(".styleMode").removeClass("active"),$("#circles").addClass("active"),draw()}),$("#squares").on("click",function(){style="squares",$(".styleMode").removeClass("active"),$("#squares").addClass("active"),draw()}),$("#exes").on("click",function(){style="exes",$(".styleMode").removeClass("active"),$("#exes").addClass("active"),draw()}),$("#polygons").on("click",function(){style="polygons",$(".styleMode").removeClass("active"),$("#polygons").addClass("active"),draw()}),$("#gridOn").on("click",function(){structure=!0,$(".gridControl").removeClass("active"),$("#gridOn").addClass("active"),draw()}),$("#gridOff").on("click",function(){structure=!1,$(".gridControl").removeClass("active"),$("#gridOff").addClass("active"),draw()}),$("#shapeSize-range").slider({range:!0,min:1,max:40,values:[10,20],slide:function(e,a){$("#shapeSize").val(a.values[0]+" - "+a.values[1]),minSize=a.values[0],maxSize=a.values[1],draw()}}),$("#shapeSize").val($("#shapeSize-range").slider("values",0)+" - "+$("#shapeSize-range").slider("values",1)),$("#gridSize-range").slider({value:80,min:30,max:250,range:"min",slide:function(e,a){$("#gridSize").val(a.value),gridSize=a.value,draw()}}),$("#gridSize").val($("#gridSize-range").slider("values",0)),$("#xOffset-range").slider({value:0,min:-50,max:50,range:"min",slide:function(e,a){$("#xOffset").val(a.value),xOffset=a.value,draw()}}),$("#xOffset").val($("#xOffset-range").slider("values",0)+" - "+$("#xOffset-range").slider("values",1)),$("#yOffset-range").slider({value:0,min:-50,max:50,range:"min",slide:function(e,a){$("#yOffset").val(a.value),yOffset=a.value,draw()}}),$("#yOffset").val($("#yOffset-range").slider("values",0)+" - "+$("#yOffset-range").slider("values",1));var layerCount=1;$("#newLayer").on("click",addNewLayer(layers[layerCount+1])),$(".layer").on("click",function(){console.log("clicky "+this.id);var e=this.id,a=e.split("r");switchLayers(a[1])}),$("#colourTextBox").on("change",getColour),$("#textBox").keyup(getText);