function setup(){textFillColour=color(25,212,255,150);for(var e=0;11>e;e++)layers[e]=new Layer;createCanvas(canvasWidth,canvasHeight),pg=createGraphics(canvasWidth,800),pg.background(255),pg.noStroke(),pg.fill(0),pg.textSize(getTextSize()),pg.textAlign(CENTER),pg.text(myType,canvasWidth/2,500)}function draw(){background(255),noLoop(),layers[1].styleMode="gridCircles",layers[1].colour=color(0,100,255,150),layers[1].xOffset=20,layers[1].yOffset=20,layers[2].styleMode="gridCircles",layers[0].xOffset=10,layers[0].yOffset=30,layers[2].display(),layers[0]=layers[1],layers[0].colour=textFillColour,layers[0].grid=gridSize,layers[0].minShapeSize=minSize,layers[0].maxShapeSize=maxSize,layers[0].stroke=!1,layers[0].xOffset=xOffset,layers[0].yOffset=yOffset,layers[0].display()}function addNewLayer(e){layerCount++}function switchLayers(e,s){var r=new Layer;console.log(s+" is now layer[0]"),r=e,r.styleMode=e.styleMode,r.xOffset=e.styleMode,r.yOffset=e.styleMode,r.styleMode=e.styleMode,r.font=e.styleMode,r.colour=e.styleMode,r.grid=e.styleMode,r.stroke=e.styleMode,r.minShapeSize=e.styleMode,r.maxShapeSize=e.styleMode,layers[0]=r,layers[0].styleMode=r.styleMode,layers[0].xOffset=r.styleMode,layers[0].yOffset=r.styleMode,layers[0].styleMode=r.styleMode,layers[0].font=r.styleMode,layers[0].colour=r.styleMode,layers[0].grid=r.styleMode,layers[0].stroke=r.styleMode,layers[0].minShapeSize=r.styleMode,layers[0].maxShapeSize=r.styleMode,e=layers[0],e.styleMode=layers[0].styleMode,e.xOffset=layers[0].styleMode,e.yOffset=layers[0].styleMode,e.styleMode=layers[0].styleMode,e.font=layers[0].styleMode,e.colour=layers[0].styleMode,e.grid=layers[0].styleMode,e.stroke=layers[0].styleMode,e.minShapeSize=layers[0].styleMode,e.maxShapeSize=layers[0].styleMode}function getTextSize(){var e=myType.split(""),s=e.length;return thisTextSize=canvasWidth/s*1.2}function drawNormal(e,s){textSize(getTextSize()),textAlign(CENTER),text(myType,canvasWidth/2+e,500+s)}function drawRandoCircles(e,s){for(var r=0;3e3>r;r++){var t=random(canvasWidth),a=random(100,600),i=pg.get(t,a),l=random(minSize,maxSize);0==i[0]&&ellipse(t+e,a+s,l,l)}}function drawWeirdoCircles(e,s){for(var r=0;3e3>r;r++){var t=random(canvasWidth),a=random(200,600),i=pg.get(t,a),l=random(minSize,maxSize);if(0==i[0]){for(var o=textFillColour,d=20;d>0;d--)o+=10,stroke(o),ellipse(t-d,a-d,l,l);stroke(0),ellipse(t+e,a+s,l,l)}}}function drawGridSquares(e,s,r,t,a){for(var i=0;e>i;i++)for(var l=0;e>l;l++){var o=i*(width/e),d=l*(width/e),n=pg.get(o,d),y=random(s,r);0==n[0]&&rect(o+t,d+a,y,y)}}function drawRandoSquares(e,s){for(var r=0;3e3>r;r++){var t=random(canvasWidth),a=random(100,600),i=pg.get(t,a),l=random(minSize,maxSize);0==i[0]&&rect(t+e,a+s,l,l)}}function drawGridCircles(e,s,r,t,a){for(var i=0;e>i;i++)for(var l=0;e>l;l++){var o=i*(width/e),d=l*(width/e),n=pg.get(o,d),y=random(s,r);0==n[0]&&ellipse(o+t,d+a,y,y)}}function Layer(){this.xOffset=0,this.yOffset=0,this.styleMode="plain",this.font,this.colour=color(0,0,0),this.grid=80,this.stroke,this.minShapeSize=5,this.maxShapeSize=10,this.display=function(){this.stroke?stroke(100):noStroke(),fill(this.colour),"gridCircles"==this.styleMode?drawGridCircles(this.grid,this.minShapeSize,this.maxShapeSize,this.xOffset,this.yOffset):"randoCircles"==this.styleMode?drawRandoCircles(this.xOffset,this.yOffset):"weirdoCircles"==this.styleMode?drawWeirdoCircles(this.xOffset,this.yOffset):"gridSquares"==this.styleMode?drawGridSquares(this.grid,this.minShapeSize,this.maxShapeSize,this.xOffset,this.yOffset):"randoSquares"==this.styleMode?drawRandoSquares(this.xOffset,this.yOffset):"plain"==this.styleMode?drawNormal(this.xOffset,this.yOffset):drawGridCircles(this.grid,this.minShapeSize,this.maxShapeSize,this.xOffset,this.yOffset)}}function hexToRgb(e){var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:null}function getColour(){var e=$("#colourTextBox").val(),s=color(hexToRgb(e).r,hexToRgb(e).g,hexToRgb(e).b,150);return textFillColour=s,console.log(textFillColour),draw(),textFillColour}function getText(){console.log("running");var e=$("#textBox").val();console.log(e),myType=e,pg.background(255),pg.noStroke(),pg.fill(0),pg.textSize(getTextSize()),pg.textAlign(CENTER),pg.text(myType,canvasWidth/2,500),draw()}var canvasWidth=$(window).width()-310,canvasHeight=$(window).height()-10,pg,myType="TEXT",insideText=!1,style="randoCircles",minSize=10,maxSize=20,thisTextSize=100,gridSize=50,textFillColour,xOffset,yOffset,layers=[];$("#gridCircles").on("click",function(){layers[0].styleMode="gridCircles",draw()}),$("#randoCircles").on("click",function(){layers[0].styleMode="randoCircles",draw()}),$("#weirdoCircles").on("click",function(){layers[0].styleMode="weirdoCircles",draw()}),$("#randoSquares").on("click",function(){layers[0].styleMode="randoSquares",draw()}),$("#gridSquares").on("click",function(){layers[0].styleMode="gridSquares",draw()}),$("#shapeSize-range").slider({range:!0,min:1,max:40,values:[10,20],slide:function(e,s){$("#shapeSize").val(s.values[0]+" - "+s.values[1]),minSize=s.values[0],maxSize=s.values[1],draw()}}),$("#shapeSize").val($("#shapeSize-range").slider("values",0)+" - "+$("#shapeSize-range").slider("values",1)),$("#gridSize-range").slider({value:50,min:30,max:250,range:"min",slide:function(e,s){$("#gridSize").val(s.value),gridSize=s.value,draw()}}),$("#gridSize").val($("#gridSize-range").slider("values",0)+" - "+$("#gridSize-range").slider("values",1)),$("#xOffset-range").slider({value:0,min:-50,max:50,range:"min",slide:function(e,s){$("#xOffset").val(s.value),xOffset=s.value,draw()}}),$("#xOffset").val($("#xOffset-range").slider("values",0)+" - "+$("#xOffset-range").slider("values",1)),$("#yOffset-range").slider({value:0,min:-50,max:50,range:"min",slide:function(e,s){$("#yOffset").val(s.value),yOffset=s.value,draw()}}),$("#yOffset").val($("#yOffset-range").slider("values",0)+" - "+$("#yOffset-range").slider("values",1));var layerCount=1;$("#newLayer").on("click",addNewLayer(layers[layerCount+1])),$(".layer").on("click",function(){console.log("clicky "+this.id),switchLayers(layers[1],this.id)}),$("#colourTextBox").on("change",getColour),$("#textBox").keyup(getText);