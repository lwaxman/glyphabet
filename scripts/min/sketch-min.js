function setup(){textFillColour=color(25,212,255,150);for(var e=0;11>e;e++)layers[e]=new Layer;createCanvas(canvasWidth,canvasHeight),pg=createGraphics(canvasWidth,800),pg.background(255),pg.noStroke(),pg.fill(0),pg.textSize(getTextSize()),pg.textAlign(CENTER),pg.text(myType,canvasWidth/2,500)}function draw(){background(255),noLoop(),layers[1].display(),layers[2].display(),layers[0]=layers[1],layers[0].colour=textFillColour,layers[0].grid=gridSize,layers[0].minShapeSize=minSize,layers[0].maxShapeSize=maxSize,layers[0].stroke=!1,layers[0].display()}function addNewLayer(e){layerCount++}function switchLayers(e,r){var a=new Layer;console.log(r+" is now layer[0]"),a=e,a.styleMode=e.styleMode,a.xOffset=e.styleMode,a.yOffset=e.styleMode,a.styleMode=e.styleMode,a.font=e.styleMode,a.colour=e.styleMode,a.grid=e.styleMode,a.stroke=e.styleMode,a.minShapeSize=e.styleMode,a.maxShapeSize=e.styleMode,layers[0]=a,layers[0].styleMode=a.styleMode,layers[0].xOffset=a.styleMode,layers[0].yOffset=a.styleMode,layers[0].styleMode=a.styleMode,layers[0].font=a.styleMode,layers[0].colour=a.styleMode,layers[0].grid=a.styleMode,layers[0].stroke=a.styleMode,layers[0].minShapeSize=a.styleMode,layers[0].maxShapeSize=a.styleMode,e=layers[0],e.styleMode=layers[0].styleMode,e.xOffset=layers[0].styleMode,e.yOffset=layers[0].styleMode,e.styleMode=layers[0].styleMode,e.font=layers[0].styleMode,e.colour=layers[0].styleMode,e.grid=layers[0].styleMode,e.stroke=layers[0].styleMode,e.minShapeSize=layers[0].styleMode,e.maxShapeSize=layers[0].styleMode}function getTextSize(){var e=myType.split(""),r=e.length;return thisTextSize=canvasWidth/r*1.2}function drawNormal(){textSize(getTextSize()),textAlign(CENTER),text(myType,canvasWidth/2,500)}function drawRandoCircles(){for(var e=0;3e3>e;e++){var r=random(canvasWidth),a=random(100,600),i=pg.get(r,a),s=random(minSize,maxSize);0==i[0]&&ellipse(r,a,s,s)}}function drawWeirdoCircles(){for(var e=0;3e3>e;e++){var r=random(canvasWidth),a=random(200,600),i=pg.get(r,a),s=random(minSize,maxSize);if(0==i[0]){for(var l=textFillColour,t=20;t>0;t--)l+=10,stroke(l),ellipse(r-t,a-t,s,s);stroke(0),ellipse(r,a,s,s)}}}function drawGridSquares(e,r,a){for(var i=0;e>i;i++)for(var s=0;e>s;s++){var l=i*(width/e),t=s*(width/e),o=pg.get(l,t),d=random(r,a);0==o[0]&&rect(l,t,d,d)}}function drawRandoSquares(){for(var e=0;3e3>e;e++){var r=random(canvasWidth),a=random(100,600),i=pg.get(r,a),s=random(minSize,maxSize);0==i[0]&&rect(r,a,s,s)}}function drawGridCircles(e,r,a){for(var i=0;e>i;i++)for(var s=0;e>s;s++){var l=i*(width/e),t=s*(width/e),o=pg.get(l,t),d=random(r,a);0==o[0]&&ellipse(l,t,d,d)}}function Layer(){this.xOffset=0,this.yOffset=0,this.styleMode="plain",this.font,this.colour=color(0,0,0),this.grid=80,this.stroke,this.minShapeSize=5,this.maxShapeSize=10,this.display=function(){this.stroke?stroke(100):noStroke(),fill(this.colour),"gridCircles"==this.styleMode?drawGridCircles(this.grid,this.minShapeSize,this.maxShapeSize):"randoCircles"==this.styleMode?drawRandoCircles():"weirdoCircles"==this.styleMode?drawWeirdoCircles():"gridSquares"==this.styleMode?drawGridSquares(this.grid,this.minShapeSize,this.maxShapeSize):"randoSquares"==this.styleMode?drawRandoSquares():"plain"==this.styleMode?drawNormal():drawGridCircles(this.grid,this.minShapeSize,this.maxShapeSize)}}function hexToRgb(e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function getColour(){var e=$("#colourTextBox").val(),r=color(hexToRgb(e).r,hexToRgb(e).g,hexToRgb(e).b,150);return textFillColour=r,console.log(textFillColour),draw(),textFillColour}var canvasWidth=$(window).width()-310,canvasHeight=$(window).height()-10,pg,myType="TEXT",insideText=!1,style="randoCircles",minSize=10,maxSize=20,thisTextSize=100,gridSize=50,textFillColour,xOffset,yOffset,layers=[];$("#gridCircles").on("click",function(){layers[0].styleMode="gridCircles",draw()}),$("#randoCircles").on("click",function(){layers[0].styleMode="randoCircles",draw()}),$("#weirdoCircles").on("click",function(){layers[0].styleMode="weirdoCircles",draw()}),$("#randoSquares").on("click",function(){layers[0].styleMode="randoSquares",draw()}),$("#gridSquares").on("click",function(){layers[0].styleMode="gridSquares",draw()}),$("#shapeSize-range").slider({range:!0,min:1,max:40,values:[10,20],slide:function(e,r){$("#shapeSize").val(r.values[0]+" - "+r.values[1]),minSize=r.values[0],maxSize=r.values[1],draw()}}),$("#shapeSize").val($("#shapeSize-range").slider("values",0)+" - "+$("#shapeSize-range").slider("values",1)),$("#gridSize-range").slider({value:50,min:30,max:200,range:"min",slide:function(e,r){$("#gridSize").val(r.value),gridSize=r.value,draw()}}),$("#gridSize").val($("#gridSize-range").slider("values",0)+" - "+$("#gridSize-range").slider("values",1));var layerCount=1;$("#newLayer").on("click",addNewLayer(layers[layerCount+1])),$(".layer").on("click",function(){console.log("clicky "+this.id),switchLayers(layers[1],this.id)}),$("#colourTextBox").on("change",getColour);